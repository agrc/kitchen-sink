{"version":3,"file":"index.esm2.js","sources":["../src/hooks/useGraphicManager.js","../src/hooks/useInterval.js","../src/hooks/useMapReady.js","../src/hooks/useOpenClosed.js","../src/hooks/useViewLoading.js","../src/hooks/useViewPointZooming.js","../src/hooks/useViewUiPosition.js","../src/hooks/useWebMap.js"],"sourcesContent":["import { useCallback, useEffect, useRef, useState } from 'react';\n\nexport default function useGraphicManager(mapView) {\n  const [graphic, setGraphic] = useState();\n  const previousGraphic = useRef();\n\n  const removeGraphics = useCallback(\n    (graphics) => {\n      if (!graphics) {\n        return;\n      }\n\n      if (Array.isArray(graphics)) {\n        graphics.forEach((x) => mapView.current.graphics.remove(x));\n      } else {\n        mapView.current.graphics.remove(graphics);\n      }\n    },\n    [mapView]\n  );\n\n  useEffect(() => {\n    removeGraphics(previousGraphic.current);\n    previousGraphic.current = graphic;\n\n    if (Array.isArray(graphic)) {\n      mapView.current?.when(() => {\n        mapView.current.graphics.addMany(graphic);\n      });\n\n      return;\n    }\n\n    mapView.current?.when(() => {\n      mapView.current.graphics.add(graphic);\n    });\n  }, [graphic, removeGraphics, mapView]);\n\n  return { graphic, setGraphic };\n}\n","import { useEffect, useRef } from 'react';\n\nexport default function useInterval(func, delay) {\n  const handle = useRef(null);\n\n  useEffect(() => {\n    handle.current = window.setInterval(func, delay);\n\n    return () => {\n      window.clearInterval(handle.current);\n    };\n  }, [func, delay]);\n}\n","import { useState } from 'react';\n\nexport default function useMapReady(view) {\n  const [ready, setReady] = useState(false);\n  const [callbackRegistered, setCallbackRegistered] = useState(false);\n\n  if (view && !callbackRegistered) {\n    view.when(() => setReady(true));\n\n    setCallbackRegistered(true);\n  }\n\n  return ready;\n}\n","import { useState, useMemo } from 'react';\n\nexport default function useOpenClosed(initial = false) {\n  const [state, setState] = useState(initial);\n\n  const handlers = useMemo(\n    () => ({\n      open: () => {\n        setState(true);\n      },\n      close: () => {\n        setState(false);\n      },\n      toggle: () => {\n        setState((s) => (s ? false : true));\n      },\n    }),\n    []\n  );\n\n  return [state, handlers];\n}\n","import { useEffect, useState } from 'react';\n\nexport default function useViewLoading(view) {\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    const init = () => {\n      view?.watch('updating', (updating) => setIsLoading(updating));\n    };\n\n    if (view) {\n      init();\n    }\n  }, [view]);\n\n  return isLoading;\n}\n","import { useEffect, useState } from 'react';\n\nexport default function useViewPointZooming(mapView) {\n  const [viewPoint, setViewPoint] = useState(null);\n\n  useEffect(() => {\n    if (viewPoint) {\n      mapView.current?.when(() => mapView.current.goTo(viewPoint).catch());\n    }\n  }, [viewPoint, mapView]);\n\n  return { viewPoint, setViewPoint };\n}\n","import { useEffect, useRef } from 'react';\n\nexport default function useViewUiPosition(view, position) {\n  const me = useRef();\n\n  useEffect(() => {\n    view?.ui.add(me.current, position);\n  }, [position, view]);\n\n  return me;\n}\n","import { useEffect, useRef } from 'react';\nimport MapView from '@arcgis/core/views/MapView';\nimport WebMap from '@arcgis/core/WebMap';\n\nexport default function useWebMap(div, id) {\n  const webMap = useRef(null);\n  const mapView = useRef(null);\n\n  useEffect(() => {\n    if (div.current) {\n      webMap.current = new WebMap({\n        portalItem: {\n          id,\n        },\n      });\n\n      mapView.current = new MapView({\n        container: div.current,\n        map: webMap.current,\n      });\n    }\n\n    return () => {\n      mapView.current.destroy();\n      webMap.current.destroy();\n    };\n  }, [div, id]);\n\n  return { webMap, mapView };\n}\n"],"names":[],"mappings":"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"}