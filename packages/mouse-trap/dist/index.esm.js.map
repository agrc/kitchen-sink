{"version":3,"file":"index.esm.js","sources":["../src/MouseTrap.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport throttle from 'lodash.throttle';\nimport { project, load } from '@arcgis/core/geometry/projection';\n\nconst projectPoint = (\n  viewPoint,\n  options = { projectToWkid: 4326, decimals: 3 }\n) => {\n  const projected = project(viewPoint, { wkid: options.projectToWkid });\n\n  if (!projected) {\n    console.log(\n      'app/mouse-trap::Projected point is null. Possibly outside of spatial reference area.'\n    );\n\n    return;\n  }\n\n  return {\n    x: projected.x.toFixed(options.decimals),\n    y: projected.y.toFixed(options.decimals),\n  };\n};\n\nconst defaultOptions = { decimals: 3, wait: 90, projectToWkid: 4326 };\n\nconst MouseTrap = ({ render, mapView, options = defaultOptions }) => {\n  const [location, setLocation] = useState({ x: null, y: null });\n\n  useEffect(() => {\n    if (!mapView) {\n      console.error(\n        'app/mouse-trap::A MapView is required for this component.'\n      );\n\n      return;\n    }\n\n    let handle = null;\n\n    load().then(() => {\n      handle = mapView.on(\n        'pointer-move',\n        throttle(\n          (evt) => setLocation(projectPoint(mapView.toMap(evt), options)),\n          options.wait\n        )\n      );\n    });\n\n    return () => {\n      if (handle) {\n        handle.remove();\n      }\n    };\n  }, [mapView, options]);\n\n  return render(location);\n};\n\nexport default MouseTrap;\n"],"names":["projectPoint","viewPoint","options","projectToWkid","decimals","projected","project","wkid","console","log","x","toFixed","y","defaultOptions","wait","MouseTrap","render","mapView","location","setLocation","useState","useEffect","error","handle","then","on","throttle","evt","toMap","remove"],"mappings":";;;AAIA,MAAMA,eAAe,CACnBC,WACAC,UAAU;AAAA,EAAEC,eAAe;AAAA,EAAMC,UAAU;AAAjC,MACP;AACGC,QAAAA,YAAYC,QAAQL,WAAW;AAAA,IAAEM,MAAML,QAAQC;AAAAA,EAAAA,CAA5B;AAEzB,MAAI,CAACE,WAAW;AACdG,YAAQC,IACN,sFADF;AAIA;AAAA,EACD;AAEM,SAAA;AAAA,IACLC,GAAGL,UAAUK,EAAEC,QAAQT,QAAQE,QAA5B;AAAA,IACHQ,GAAGP,UAAUO,EAAED,QAAQT,QAAQE,QAA5B;AAAA,EAAA;AAEN;AAED,MAAMS,iBAAiB;AAAA,EAAET,UAAU;AAAA,EAAGU,MAAM;AAAA,EAAIX,eAAe;AAAxC;AAEvB,MAAMY,YAAY,CAAC;AAAA,EAAEC;AAAAA,EAAQC;AAAAA,EAASf,UAAUW;AAAAA,MAAqB;AAC7D,QAAA,CAACK,UAAUC,eAAeC,SAAS;AAAA,IAAEV,GAAG;AAAA,IAAME,GAAG;AAAA,EAAA,CAAf;AAExCS,YAAU,MAAM;AACd,QAAI,CAACJ,SAAS;AACZT,cAAQc,MACN,2DADF;AAIA;AAAA,IACD;AAED,QAAIC,SAAS;AAET,SAAA,EAAGC,KAAK,MAAM;AAChBD,eAASN,QAAQQ,GACf,gBACAC,SACGC,CAAAA,QAAQR,YAAYnB,aAAaiB,QAAQW,MAAMD,GAAd,GAAoBzB,OAArB,CAAb,GACpBA,QAAQY,IAFF,CAFD;AAAA,IAAA,CADX;AAUA,WAAO,MAAM;AACX,UAAIS,QAAQ;AACVA,eAAOM,OAAP;AAAA,MACD;AAAA,IAAA;AAAA,EACF,GACA,CAACZ,SAASf,OAAV,CA1BM;AA4BT,SAAOc,OAAOE,QAAD;AACd;;"}